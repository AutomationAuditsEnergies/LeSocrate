<!DOCTYPE html>
<html lang="fr">
<head>
  <meta charset="UTF-8">
  <title>Formation Sales Hacking - En attente</title>
  <script src="https://cdn.tailwindcss.com"></script>
  <style>
    html, body {
      height: 100%;
      margin: 0;
      overflow-x: hidden; /* Garde le scroll horizontal désactivé */
    }

    /* Lemon Milk */
    @font-face {
      font-family: 'Lemon Milk';
      src: url("{{ url_for('static', filename='fonts/LEMONMILK-Regular.otf') }}") format("opentype");
      font-weight: normal;
      font-style: normal;
    }

    .lemon-title {
      font-family: 'Lemon Milk', sans-serif;
      letter-spacing: 1px;
    }

    /* Animations */
    @keyframes pulse {
      0%, 100% { transform: scale(1); }
      50% { transform: scale(1.05); }
    }

    @keyframes glow {
      0%, 100% { 
        box-shadow: 0 0 20px rgba(59, 130, 246, 0.3),
                    0 0 40px rgba(59, 130, 246, 0.2),
                    0 0 60px rgba(59, 130, 246, 0.1);
      }
      50% { 
        box-shadow: 0 0 30px rgba(59, 130, 246, 0.5),
                    0 0 60px rgba(59, 130, 246, 0.3),
                    0 0 90px rgba(59, 130, 246, 0.2);
      }
    }

    .countdown-glow {
      animation: glow 2s ease-in-out infinite;
    }

    .pulse-animation {
      animation: pulse 2s ease-in-out infinite;
    }

    /* Particules en arrière-plan */
    @keyframes float {
      0%, 100% { transform: translateY(0px) rotate(0deg); }
      33% { transform: translateY(-30px) rotate(120deg); }
      66% { transform: translateY(30px) rotate(240deg); }
    }

    .floating-particle {
      animation: float 6s ease-in-out infinite;
    }
  </style>
</head>

<body class="flex flex-col h-full w-full bg-cover bg-center relative overflow-hidden" style="background-image: url('{{ url_for('static', filename='images/prof-avatar.jpg') }}');">
  
  <!-- Calque noir semi-transparent -->
  <div class="absolute inset-0 bg-black/60 z-0"></div>

  <!-- Particules flottantes -->
  <div class="absolute inset-0 z-1">
    <div class="floating-particle absolute top-20 left-20 w-4 h-4 bg-blue-400/30 rounded-full"></div>
    <div class="floating-particle absolute top-40 right-32 w-6 h-6 bg-purple-400/30 rounded-full" style="animation-delay: -2s;"></div>
    <div class="floating-particle absolute bottom-32 left-40 w-3 h-3 bg-pink-400/30 rounded-full" style="animation-delay: -4s;"></div>
    <div class="floating-particle absolute bottom-20 right-20 w-5 h-5 bg-yellow-400/30 rounded-full" style="animation-delay: -1s;"></div>
    <div class="floating-particle absolute top-1/2 left-10 w-4 h-4 bg-green-400/30 rounded-full" style="animation-delay: -3s;"></div>
    <div class="floating-particle absolute top-1/3 right-10 w-3 h-3 bg-red-400/30 rounded-full" style="animation-delay: -5s;"></div>
  </div>

  <!-- Header -->
  <header class="relative z-10 w-full px-6 py-3">
    <div class="bg-black/80 backdrop-blur-sm border border-white/30 rounded-2xl px-4 py-3 flex items-center justify-between shadow-md">
      
      <!-- Partie utilisateur à gauche -->
      <div class="flex items-center gap-3">
        <img src="{{ url_for('static', filename='images/user.webp') }}"
             alt="Photo utilisateur"
             class="w-10 h-10 rounded-full object-cover bg-gray-700" />

        <div class="text-sm text-white leading-tight">
          <div class="font-semibold">{{ prenom }} {{ nom }}</div>
          <div class="text-xs text-gray-400">En attente</div>
        </div>
      </div>

      <!-- Titre centré avec police Lemon Milk -->
      <div class="absolute left-1/2 transform -translate-x-1/2 text-white text-2xl lemon-title">
        Formation Sales Hacking
      </div>

      <!-- Bouton Quitter à droite -->
      <button onclick="window.location.href='/logout'" 
              class="flex items-center justify-center hover:opacity-90 transition">
        <svg xmlns="http://www.w3.org/2000/svg" 
             viewBox="0 0 24 24" 
             fill="currentColor" 
             class="w-8 h-8 text-purple-400 drop-shadow-[0_0_3px_rgba(147,51,234,0.4)]">
          <path fill-rule="evenodd" d="M7.5 3.75A1.5 1.5 0 0 0 6 5.25v13.5a1.5 1.5 0 0 0 1.5 1.5h6a1.5 1.5 0 0 0 1.5-1.5V15a.75.75 0 0 1 1.5 0v3.75a3 3 0 0 1-3 3h-6a3 3 0 0 1-3-3V5.25a3 3 0 0 1 3-3h6a3 3 0 0 1 3 3V9A.75.75 0 0 1 15 9V5.25a1.5 1.5 0 0 0-1.5-1.5h-6Zm5.03 4.72a.75.75 0 0 1 0 1.06l-1.72 1.72h10.94a.75.75 0 0 1 0 1.5H10.81l1.72 1.72a.75.75 0 1 1-1.06 1.06l-3-3a.75.75 0 0 1 0-1.06l3-3a.75.75 0 0 1 1.06 0Z" clip-rule="evenodd" />
        </svg>
      </button>

    </div>
  </header>

  <!-- Contenu principal -->
  <div class="flex-1 flex flex-col items-center justify-center relative z-10 px-8 py-8">
    
    <!-- Icône principale -->
    <div class="pulse-animation mb-8">
      <div class="w-32 h-32 bg-gradient-to-br from-blue-500 to-purple-600 rounded-full flex items-center justify-center shadow-2xl">
        <svg xmlns="http://www.w3.org/2000/svg" class="w-16 h-16 text-white" fill="currentColor" viewBox="0 0 24 24">
          <path d="M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z"/>
        </svg>
      </div>
    </div>

    <!-- Message principal -->
    <h1 class="text-4xl md:text-5xl font-bold text-white text-center mb-4 lemon-title">
      Cours en préparation
    </h1>
    
    <p class="text-xl text-gray-300 text-center mb-8 max-w-2xl leading-relaxed" style="text-shadow: 2px 2px 4px rgba(0,0,0,0.8), -1px -1px 2px rgba(0,0,0,0.6);">
      Votre formation <span class="text-blue-400 font-semibold">Sales Hacking</span> va bientôt commencer.<br>
      Préparez-vous pour une expérience d'apprentissage exceptionnelle !
    </p>

    <!-- Compte à rebours -->
    <div class="countdown-glow bg-gradient-to-r from-blue-600/20 to-purple-600/20 backdrop-blur-lg border border-white/30 rounded-3xl p-8 mb-8">
      <h2 class="text-2xl font-semibold text-white text-center mb-6">Début dans :</h2>
      
      <div class="grid grid-cols-4 gap-4 text-center">
        <div class="bg-white/10 rounded-xl p-4">
          <div id="jours" class="text-3xl font-bold text-blue-400">00</div>
          <div class="text-sm text-gray-300">Jours</div>
        </div>
        <div class="bg-white/10 rounded-xl p-4">
          <div id="heures" class="text-3xl font-bold text-purple-400">00</div>
          <div class="text-sm text-gray-300">Heures</div>
        </div>
        <div class="bg-white/10 rounded-xl p-4">
          <div id="minutes" class="text-3xl font-bold text-pink-400">00</div>
          <div class="text-sm text-gray-300">Minutes</div>
        </div>
        <div class="bg-white/10 rounded-xl p-4">
          <div id="secondes" class="text-3xl font-bold text-yellow-400">00</div>
          <div class="text-sm text-gray-300">Secondes</div>
        </div>
      </div>
    </div>

    <!-- Bouton actualiser -->
    <button onclick="window.location.reload()" 
            class="bg-gradient-to-r from-blue-500 to-purple-600 hover:from-blue-600 hover:to-purple-700 text-white px-8 py-3 rounded-full font-semibold transition-all duration-300 transform hover:scale-105 shadow-lg">
      Actualiser
    </button>

  </div>

  <script>
    // Temps restant initial en secondes (passé depuis le serveur)
    let tempsRestant = {{ temps_restant }};

    function mettreAJourCompteur() {
      if (tempsRestant <= 0) {
        // Le cours a commencé, rediriger
        window.location.reload();
        return;
      }

      // Calculer les jours, heures, minutes, secondes
      const jours = Math.floor(tempsRestant / (24 * 3600));
      const heures = Math.floor((tempsRestant % (24 * 3600)) / 3600);
      const minutes = Math.floor((tempsRestant % 3600) / 60);
      const secondes = tempsRestant % 60;

      // Mettre à jour l'affichage
      document.getElementById('jours').textContent = String(jours).padStart(2, '0');
      document.getElementById('heures').textContent = String(heures).padStart(2, '0');
      document.getElementById('minutes').textContent = String(minutes).padStart(2, '0');
      document.getElementById('secondes').textContent = String(secondes).padStart(2, '0');

      // Décrémenter
      tempsRestant--;
    }

    // Démarrer le compteur
    mettreAJourCompteur();
    const interval = setInterval(mettreAJourCompteur, 1000);

    // Actualiser automatiquement la page toutes les 30 secondes
    // pour vérifier si le cours a commencé
    setInterval(() => {
      window.location.reload();
    }, 30000);
  </script>

</body>
</html>